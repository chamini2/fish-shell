function test_function
    set -l i 1
    for v in ONE TWO THREE
        set -f $v $i
        set i (math "$i + 1")
    end
    echo "I say $ONE, $TWO, $THREE"
    if test $ONE = 1
        set -l ONE 0
        echo -n "Inside if ($ONE) "
    end
    echo "and after ($ONE)"
    if test $ONE
        set ONE 0
        echo -n "Inside if without setting as local ($ONE) "
    end
    echo "and after ($ONE)"
end

function tttt
    set -l local_var 1
    set -f func_var 0
    set -g global_var 2
    for var in func_var local_var global_var
        for flag in local function global
            set -q --$flag $var
            and echo "$var $flag scoped"
        end
    end
    set -eg global_var
    set -ef func_var
    set -el local_var
end

test_function
echo
tttt
